<div class="group infos">
    <div class="app panel">
        {{> (partial 'stats_infos')}}
    </div>
</div>
<div class="group primary">
    <div class="app panel header">
        {{#if hasActor}}
        {{> (partial 'stats_level')}}
        {{> (partial 'stats_speed')}}
        {{/if}}
    </div>
    <div class="app panel saves">
        {{> (partial 'stats_statistics')}}
    </div>
</div>
<div class="group stretch">
    <div class="panel app sidebars">
        {{> (partial 'sidebars')}}
    </div>
    <div class="bottom">
        {{#if isCharacter}}
        <div class="panel app">
            {{> (partial 'stats_extras')}}
        </div>
        {{/if}}
        <div class="shortcuts">
            {{#if shortcutGroups}}
            {{#each shortcutGroups as |shortcutGroup|}}
            <div class="shortcut-group{{#if shortcutGroup.split}} split{{/if}}">
                {{#each shortcutGroup.shortcuts as |shortcut|}}
                <div class="shortcut app {{shortcut.type}}{{#if shortcut.isEmpty}} empty{{else if shortcut.isDisabled}} disabled{{/if}}{{#if shortcut.isFadedOut}} faded-out{{/if}}"
                    data-group-index="{{shortcut.groupIndex}}" data-index="{{shortcut.index}}">
                    {{#unless
                    shortcut.isEmpty}}{{> shortcut
                    shortcut=shortcut}}{{/unless}}</div>
                {{/each}}
            </div>
            {{/each}}
            {{else}}
            {{#times 4}}
            <div class="shortcut-group">
                <div class="shortcut app"></div>
            </div>
            {{/times}}
            {{/if}}
        </div>
    </div>
</div>

{{#*inline 'shortcut'}}
<img src="{{shortcut.img}}">
<div class="name app">{{shortcut.name}}</div>
{{!-- consumable --}}
{{#if (eq shortcut.type 'consumable')}}
{{> consumable consumable=shortcut}}
{{/if}}
{{!-- attack --}}
{{#if (eq shortcut.type 'attack')}}
{{> attack attack=shortcut}}
{{/if}}
{{/inline}}

{{#*inline 'consumable'}}
<div class="quantity boxed">{{consumable.quantity}}</div>
{{#if consumable.isGeneric}}
<div class="generic">
    <i class="fa-solid fa-star"></i>
</div>
{{/if}}
{{#if consumable.categoryIcon}}
<div class="category-icon">
    <i class="{{consumable.categoryIcon}}"></i>
</div>
{{/if}}
{{#if consumable.rank}}
<div class="rank boxed">{{consumable.rank}}</div>
{{/if}}
{{/inline}}

{{#*inline 'attack'}}
{{#if attack.blast}}
{{> (@root.partial 'action_blast-row') blast=attack.blast melee=true}}
{{> (@root.partial 'action_blast-row') blast=attack.blast melee=false}}
{{/if}}
{{#unless attack.isDisabled}}
<div class="controls">
    {{#if @root.isCharacter}}
    <a class="extras" data-action="open-attack-popup" data-element-trait="{{attack.elementTrait}}"
        data-itemId="{{attack.itemId}}" data-slug="{{attack.slug}}"
        data-type="{{ifThen attack.blast 'blast' 'strike'}}">
        <i class="fa-solid fa-ellipsis-vertical"></i>
    </a>
    {{/if}}
    <a class="type-toggle attack" data-action="toggle-damage">
        <i class="fa-solid fa-bullseye"></i>
    </a>
    <a class="type-toggle damage" data-action="toggle-damage">
        <i class="fa-solid fa-burst"></i>
    </a>
</div>
{{/unless}}
{{/inline}}